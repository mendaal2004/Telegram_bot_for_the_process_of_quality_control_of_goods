# Импорт библиотек и модулей
from dash import Dash, html, dash_table, dcc, callback, Output, Input
import pandas as pd
import plotly.express as px

# Чтение данных из CSV-файла
df = pd.read_csv('https://raw.githubusercontent.com/mendaal2004/Analysis_of_sunset_and_sunrise_time_data-Type-to-search/main/lab.csv')

# Создание объекта приложения Dash
app = Dash(__name__)

# Определение макета приложения
app.layout = html.Div([
    # Заголовок
    html.H1(children='Анализ данных о времени заката и восхода солнца', style={'textAlign':'center', 'color': 'orange', 'fontSize': 30}),

    # Описание веб-приложения Dash
    html.Div(children='''
        Дашборд предназначен для анализа данных о времени заката и восхода солнца.
        Включает в себя графики, диаграммы и таблицы для визуализации и анализа данных.
    '''),

    # Таблица с данными
    dash_table.DataTable(data=df.to_dict('records'), page_size=6, style_table={'overflowX': 'auto'}),

    # Радиокнопки
    dcc.RadioItems(options=['sunrise', 'sunset'], inline=True, value='date', id='radioitems'),

    html.Div([

        # График 1 (линейный)
        dcc.Graph(figure={}, id='graph1', style={'width': '50%', 'display': 'inline-block'}),

        # График 2 (столбчатый)
        dcc.Graph(figure={}, id="graph2", style={'width': '50%', 'display': 'inline-block'}),
    ], style={'textAlign': 'center'}),

    # Выпадающий список
    dcc.Dropdown(options=['sunrise', 'sunset'], value='date', id='dropdown'),

    # График 3 (точечный)
    dcc.Graph(figure={}, id="graph3"),
])

# Связь между элементами интерактивного веб-приложения Dash
@callback(
    Output(component_id='graph1', component_property='figure'),
    Output(component_id='graph2', component_property='figure'),
    Output(component_id='graph3', component_property='figure'),
    Input(component_id='radioitems', component_property='value'),
    Input(component_id='radioitems', component_property='value'),
    Input(component_id='dropdown', component_property='value'),
)

# Обновление графиков на основе выбранных пользователем параметров
def update_graph(col_chosen_1, col_chosen_2, col_chosen_3):
    fig1 = px.bar(df, x=col_chosen_1, y='date')
    fig1.update_layout(title_text="Столбчатый график")
    fig2 = px.line(df, x=col_chosen_2, y='date')
    fig2.update_layout(title_text="Линейный график")
    fig3 = px.scatter(df, x=col_chosen_3, y='date')
    fig3.update_layout(title_text="Точечный график")
    return fig1, fig2, fig3

# Запуск приложения
if __name__ == '__main__':
    app.run(debug=True)
